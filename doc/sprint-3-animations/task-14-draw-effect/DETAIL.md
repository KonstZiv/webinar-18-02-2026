# Task 14 — Draw Effect: Детальний опис

## Мета
Створити візуальний ефект для нічиї — символи поступово "розчиняються" і зникають з дошки.

## Що робимо

1. Створити `src/tictactoe_cli/animations/draw.py`
2. **Тести:** додати `tests/test_draw_effect.py` — перевірка фаз розчинення, trigger тільки при tie
3. Функція `draw_effect(console, game_state, renderer)`:
   - Поступово замінює `█` блоки на тьмяніші варіанти
   - 4-5 фаз: `█` → `▓` → `▒` → `░` → ` ` (пробіл)
   - Кожна фаза — перемальовування дошки з оновленими символами

## Як робимо

### Фази розчинення
```
Фаза 0: ██           ██    (оригінал, bold)
Фаза 1: ▓▓           ▓▓    (dim)
Фаза 2: ▒▒           ▒▒    (darker)
Фаза 3: ░░           ░░    (very dim)
Фаза 4:                     (пусто)
```

### Алгоритм
1. Отримати всі непусті клітинки з `game_state.grid.cells`
2. Для кожної фази (0-4):
   - Замінити символи блоків на відповідний символ фази
   - Зменшити яскравість кольору (Rich styles: `bold` → `` → `dim`)
   - Перемалювати дошку через `Live`
   - `time.sleep(0.4)` між фазами
3. Після останньої фази — дошка порожня, перехід до Result Banner

### Варіація: рандомне розчинення
- Замість одночасного переходу всіх блоків → кожен блок переходить на наступну фазу з рандомною затримкою
- Створює ефект "осипання" — більш цікавий візуально
- Реалізація: для кожного символу `█` у кожній клітинці — окремий лічильник фази

### Технічні деталі
- `rich.live.Live` для оновлення без мерехтіння
- Символи: `█` (U+2588), `▓` (U+2593), `▒` (U+2592), `░` (U+2591)
- Рамки дошки НЕ розчиняються — тільки вміст клітинок

## Очікувані результати

- При нічиї — символи плавно розчиняються (4-5 фаз, ~2 секунди)
- Ефект візуально "красивий" — не просто зникнення, а деградація
- Рамки дошки залишаються на місці під час ефекту
- Після розчинення — перехід до банера результату

## Як тестувати виконання

```python
# test_draw_effect.py
def test_dissolve_phases():
    """Verify that dissolve produces correct character progression."""
    phases = ["█", "▓", "▒", "░", " "]
    # Test that each phase uses the expected character

def test_draw_effect_only_on_tie():
    """Draw effect should only trigger when game is a tie."""
    state = GameState(Grid("X0XX0000X"))
    assert state.tie is True
    # Effect should run

    state2 = GameState(Grid("XXX00    "))
    assert state2.tie is False
    # Effect should NOT run
```

Візуальна перевірка: довести гру до нічиї, спостерігати розчинення.

## Контрольні точки поза тестуванням

1. Перехід між фазами плавний — кожна фаза помітно тьмяніша
2. Ефект не занадто швидкий (мінімум 1.5 секунди) і не занадто повільний (максимум 3 секунди)
3. Рамки дошки не порушуються під час ефекту
4. Після завершення — екран чистий, готовий для банера
