# Task 09 — Place Effect: Детальний опис

## Мета
Додати візуальний ефект появи символу при ході — замість миттєвого відображення, символ "друкується" порядково зверху вниз.

## Що робимо

1. Створити `src/tictactoe_cli/animations/__init__.py` (якщо ще немає)
2. Створити `src/tictactoe_cli/renderer/effects.py`
3. **Тести:** додати `tests/test_place_effect.py` — перевірка тривалості ефекту, відсутність crash
4. Функція `place_effect(console, board_lines, cell_index, symbol_lines, delay)`:
   - Перемальовує дошку 7 разів (по кількості рядків символу)
   - Кожен кадр додає один рядок символу в клітинку
   - Затримка 30-60ms між кадрами

## Як робимо

### Алгоритм
1. Отримати поточний стан дошки як список рядків (від рендерера)
2. Визначити позицію клітинки `cell_index` на екрані (рядок/стовпець)
3. Для `i` від 0 до 6:
   - Скопіювати рядки дошки
   - Замінити рядки клітинки: перші `i+1` рядків — з символу, решта — пусті
   - Відрендерити повну дошку через `rich.live.Live` або `console.print` з `\033[H`
   - `time.sleep(0.04)`

### Інтеграція з Renderer
- `RichRenderer` отримує опціональний параметр `animate: bool = True`
- При новому ході (порівнюючи попередній та поточний `GameState`) — викликає `place_effect`
- Для цього рендерер зберігає `self._previous_state: GameState | None`

### Технічні деталі
- Використовувати `rich.live.Live` context manager для flicker-free оновлення
- Або ANSI escape `\033[H` для переміщення курсора на початок (без очищення)
- Затримка: `time.sleep(0.03)` — достатньо для візуального ефекту, не дратує

## Очікувані результати

- При ході гравця/AI — символ з'являється з видимою анімацією (не миттєво)
- Анімація займає ~0.2с (7 кадрів * 30ms)
- Після анімації — дошка виглядає ідентично звичайному рендеру
- Анімація не ламає розкладку дошки

## Як тестувати виконання

```python
# test_place_effect.py
import time
from tictactoe_cli.renderer.effects import place_effect

def test_place_effect_duration():
    """Place effect should complete in roughly 0.2-0.5 seconds."""
    start = time.monotonic()
    # Mock console/board and run effect
    elapsed = time.monotonic() - start
    assert 0.1 < elapsed < 1.0
```

Візуальна перевірка: зіграти партію, переконатися що кожен хід супроводжується анімацією появи.

## Контрольні точки поза тестуванням

1. Анімація помітна, але не повільна — не дратує при грі
2. Після анімації дошка ідентична статичному рендеру
3. Ефект працює для обох символів (X та O)
4. При AI vs AI — анімації не накладаються одна на одну
